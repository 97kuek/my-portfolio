---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';

// ブログ記事を取得し、新しい順に並べ替えて「最新の3件」だけ取り出す
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).slice(0, 3);
---

<!doctype html>
<html lang="ja">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<div class="hero">
				<h1>Hello, World!</h1>
				<p class="bio">
					早稲田大学 基幹理工学部 情報通信学科 2年<br/>
					<strong>植木 敬太郎 (Keitaro Ueki)</strong> のポートフォリオです。<br/>
					<br/>
					人力飛行機とか映画鑑賞とかガジェットとか...<br/>
					Web開発・数値解析の学習記録をまとめています。
				</p>
				
				<div class="links">
					<a href="/about" class="button primary">経歴・スキル詳細 &rarr;</a>
					<a href="/publications" class="button secondary">研究業績リスト &rarr;</a>
				</div>
			</div>

			<hr />

			<section>
				<h2>Latest Updates</h2>
				<ul class="post-list">
					{posts.map((post) => (
						<li>
							<span class="date">{post.data.pubDate.toLocaleDateString('ja-JP')}</span>
							<a href={`/blog/${post.slug}/`}>{post.data.title}</a>
						</li>
					))}
				</ul>
				<p style="text-align: right; margin-top: 1rem;">
					<a href="/blog">すべての記事を見る &rarr;</a>
				</p>
			</section>
		</main>
		<Footer />
	</body>
</html>

<style>
	.hero {
		text-align: center;
		padding: 3rem 0;
	}
	.bio {
		font-size: 1.2rem;
		line-height: 1.8;
		color: #444;
		margin-bottom: 2.5rem;
	}
	.links {
		display: flex;
		gap: 1rem;
		justify-content: center;
		flex-wrap: wrap;
	}
	/* ボタンのデザイン */
	.button {
		padding: 0.8rem 1.5rem;
		text-decoration: none;
		border-radius: 8px;
		font-weight: bold;
		transition: transform 0.2s;
	}
	.button:hover {
		transform: translateY(-2px);
	}
	.primary {
		background: #333;
		color: #fff;
	}
	.secondary {
		background: #f4f4f5;
		color: #333;
		border: 1px solid #ddd;
	}

	/* 記事リストのデザイン */
	.post-list {
		list-style: none;
		padding: 0;
	}
	.post-list li {
		display: flex;
		flex-direction: column; /* スマホ向けに縦並び */
		gap: 0.5rem;
		margin-bottom: 1rem;
		border-bottom: 1px solid #eee;
		padding-bottom: 1rem;
	}
	@media (min-width: 600px) {
		.post-list li {
			flex-direction: row; /* PCなら横並び */
			align-items: center;
			gap: 2rem;
		}
	}
	.date {
		color: #888;
		font-family: monospace;
		font-size: 0.95rem;
		min-width: 100px;
	}
</style>